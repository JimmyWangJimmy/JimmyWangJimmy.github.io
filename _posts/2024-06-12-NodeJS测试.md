### Testing Node applications

我使用的node版本是`20.12.1`

使用Node自有的测试库：

> Node also has a built-in test library [node:test](https://nodejs.org/docs/latest/api/test.html)



测试包括：测试函数、测试文件、运行。

测试函数文件：for_testing.js

测试文件：a.test.js

运行：node --test

对于测试函数，假设在utils文件夹下创建一个for_testing.js的文件，用于统一存放各类测试函数。

其结构如下：

```js
const dummy = (blogs) => {
    // ...
    return 1;
}

module.exports = {
  dummy,
}
```



在测试文件中，假设为a.test.js

1.首先导入Node的test关键字、assert

```js
const { test } = require('node:test')
const assert = require('node:assert')
```

2.接下来导入测试函数

```js
const dummy = require('../utils/for_testing').dummy
```

3.写测试用例

> Individual test cases are defined with the *test* function. The first argument of the function is the test description as a string. The second argument is a *function*, that defines the functionality for the test case. 

形如：在test函数中，传入两个参数。第一个参数是用来测试的字符串，第二个参数是测试用例的功能（functionality for the test case）。

```js
test('conduct of a', () => {
  const result = dummy('a')

  assert.strictEqual(result, 'a')
})
```

可以重复很多次第三步

4.进行测试

在script中加入测试命令

```js
"test": "node --test"
```

最后运行

```
npm run test
```

进行测试。

测试结果如：

![](E:\MyGithubWeb\JimmyWangJimmy.github.io\_posts\img\6-12测试结果.png)